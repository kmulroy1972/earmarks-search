# Earmarks Search

A Next.js application for searching and analyzing congressional earmarks data. Built with Next.js, Tailwind CSS, and Supabase.

## Features

- Search earmarks by recipient, budget function, or agency
- View detailed information about each earmark
- Real-time search with Supabase
- Responsive design with Tailwind CSS

## Tech Stack

- Next.js 14
- TypeScript
- Tailwind CSS
- Supabase (PostgreSQL)

## Local Development

1. Clone the repository:
```bash
git clone https://github.com/kmulroy1972/earmarks-search.git
cd earmarks-search
```

2. Install dependencies:
```bash
npm install
```

3. Set up local Supabase:
```bash
supabase start
```

4. Create a `.env.local` file with your Supabase credentials:
```
NEXT_PUBLIC_SUPABASE_URL=http://127.0.0.1:54321
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
```

5. Import the data:
   - Place your `earmarks.csv` file in the project root
   - The CSV should have the following columns:
     ```
     year,agency,subunit,subcommittee,account,budget_number,budget_function,recipient,amount,location,member
     ```
   - Import the data using psql:
     ```bash
     PGPASSWORD=postgres psql -h 127.0.0.1 -p 54322 -U postgres -d postgres -c "\copy earmarks(year,agency,subunit,subcommittee,account,budget_number,budget_function,recipient,amount,location,member) from 'earmarks.csv' with csv header;"
     ```

6. Run the development server:
```bash
npm run dev
```

Open [http://localhost:3000](http://localhost:3000) to view the application.

## Database Schema

The application uses a PostgreSQL database with the following schema:

```sql
create table earmarks (
  id bigint generated by default as identity primary key,
  year integer not null,
  agency text,
  subunit text,
  subcommittee text,
  account text,
  budget_number text,
  budget_function text,
  recipient text,
  amount numeric,
  location text,
  member text,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);
```

## Data Source

The earmarks data is not included in this repository due to its size. To use this application, you'll need:
1. A CSV file containing earmarks data with the columns specified above
2. Follow the import instructions in the "Local Development" section
3. The data should follow the schema defined in the database migration

Note: Large CSV files are excluded from the repository via `.gitignore` to keep the repository size manageable.

## Contributing

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add some amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

## License

This project is open source and available under the MIT License.
